\capitulo{3}{Conceptos teóricos}

Green In House es un proyecto que combina diversas tecnologías para facilitar el cuidado de las plantas, por lo que es necesario tener claro tanto los conceptos teóricos referentes a los factores que influyen en el crecimiento de las plantas, como los conceptos teóricos de las diferentes tecnologías involucradas en el sistema.

\section{Fotosíntesis}
La fotosíntesis \cite{wiki:fotosíntesis} es un proceso vital que ocurre en las plantas y algunos organismos como las algas y algunas bacterias. Como se muestra en la Figura 3.1, es el proceso mediante el cual los organismos capturan la energía del sol y la convierten en energía química, almacenándola en forma de compuestos orgánicos, como los azúcares. Esta energía química es esencial para el crecimiento y desarrollo de los seres vivos y también para mantener el equilibrio ecológico en nuestro planeta.
\imagen{fotosintesis}{dibujo aclaratorio del ciclo de la fotosíntesis extraído de Wikipedia}{.3}
La fotosíntesis es un proceso fundamental para la vida en la Tierra, ya que las plantas son la base de la cadena alimentaria. Los organismos heterótrofos, como los animales, obtienen la energía necesaria al consumir plantas u otros organismos que se alimentan de ellas. Además, la fotosíntesis tiene un papel crucial en la producción de oxígeno, ya que durante el proceso se libera este gas que es vital para la respiración de los seres vivos.

La fotosíntesis se lleva a cabo en los cloroplastos, orgánulos presentes en las células de las plantas. Estos contienen un pigmento verde llamado clorofila, el cual es el responsable de capturar la energía lumínica del sol. Como se muestra en la Figura 3.2, el proceso de fotosíntesis se puede dividir en dos etapas: 
\begin{itemize}
    \item \textbf{Fase luminosa \cite{wiki:fase_luminosa}:} la energía lumínica del sol es absorbida por la clorofila y se utiliza para dividir las moléculas de agua en oxígeno y protones. Este proceso libera energía en forma de ATP (adenosín trifosfato), el cual es una molécula portadora de energía. Además, se genera NADPH (nicotinamida adenina dinucleótido fosfato reducido), la cual es otra molécula portadora de energía.
    \item \textbf{Fase oscura \cite{wiki:fase_oscura}:} los ATP y el NADPH generados en la fase luminosa se utilizan para convertir el dióxido de carbono (CO2) en moléculas orgánicas, como los azúcares. Este proceso se conoce como fijación del carbono y es fundamental para la producción de biomasa
\end{itemize}
\imagen{fases_fotosintesis}{dibujo aclaratorio de las fases de la fotosíntesis extraído de Wikipedia}{.3}

\section{Factores que influyen en el crecimiento de una planta}
Es esencial mantener un control adecuado de la temperatura, la humedad y la luminosidad para fomentar un desarrollo correcto de una planta. \cite{wiki:factores_crecimiento_planta}
\begin{itemize}
    \item \textbf{La luminosidad} es fundamental para la fotosíntesis. Este es el proceso a través del cual las plantas convierten la luz solar, el agua y los nutrientes en alimento (glucosa). Sin suficiente luz, una planta no puede producir la energía que necesita para crecer. Pero de nuevo, demasiada luz (especialmente la luz solar directa y fuerte), puede ser perjudicial y causar quemaduras en las hojas de la planta. Por eso es esencial garantizar que la planta reciba la cantidad adecuada de luz.
    \item \textbf{La humedad} juega un papel vital en la salud de las plantas. La humedad ambiental afecta a la tasa de transpiración. Este es el proceso mediante el cual el agua se evapora de las hojas de las plantas. Este proceso es esencial para el transporte de nutrientes a través de la planta, pero si la humedad es demasiado baja, la planta puede perder agua más rápidamente de lo que puede absorberla, llevándola a la deshidratación. Por otro lado, demasiada humedad puede promover el crecimiento de hongos y otras enfermedades. Por lo tanto, mantener el equilibrio correcto es crucial. La humedad del suelo es uno de los factores más críticos para el crecimiento de una planta. Todas las plantas necesitan agua para sobrevivir y crecer. Las raíces de las plantas toman agua del suelo y la transportan al resto de la planta para realizar una variedad de funciones vitales. Entre estas funciones se incluyen la fotosíntesis, el transporte de nutrientes desde el suelo a través de la planta, y la regulación de la temperatura de la planta a través de la transpiración. Si el suelo está demasiado seco, las plantas no pueden obtener suficiente agua para llevar a cabo estas funciones vitales y pueden empezar a marchitarse. Por contra, si el suelo está demasiado húmedo, las raíces de las plantas pueden llegar a saturarse de agua, lo que puede impedir que las raíces reciban el oxígeno que necesitan para sobrevivir. En el peor de los casos, un exceso de agua puede llevar a la putrefacción de la raíz, resultando fatal para la planta. Además, la cantidad de humedad en el suelo también puede afectar la capacidad del suelo para retener nutrientes. Algunos nutrientes son solubles en agua y pueden ser lavados del suelo si hay demasiada humedad. Por otro lado, si el suelo está demasiado seco, puede ser difícil para las raíces de las plantas absorber los nutrientes que necesitan.
    \item \textbf{La temperatura} es un factor crítico en el crecimiento de las plantas. Las plantas, al igual que los humanos, tienen un rango de temperaturas máximas y mínimas en las que pueden sobrevivir y prosperar. Si la temperatura es demasiado baja, una planta puede entrar en un estado de latencia, en el cual el crecimiento se ralentiza o incluso se detiene, marchitando la planta. Por el contrario, si la temperatura es demasiado alta, puede dañar la estructura celular de la planta y causar estrés, lo cual puede resultar en un crecimiento pobre o en la marchitación de la planta. Por lo tanto, mantener la temperatura dentro del rango óptimo es crucial para garantizar un crecimiento saludable.   
\end{itemize}
Además de estos tres factores en los que se centra Green In House, existen muchos más factores que influyen en el crecimiento de las plantas como por ejemplo la calidad del suelo, la cantidad de nutrientes que tiene la tierra, el abono que se utiliza, el espacio que dispone la planta para crecer, la necesidad de podar las ramas, etc. En esta memoria no se incide más sobre ellos ya que no serán controlados por Green In Houe, pero es relevante destacar la existencia de los mismos.

\section{Raspberry Pi: Microcomputador con entradas y salidas}
Raspberry Pi \cite{info:raspberry_pi} es una serie de computadoras de placa única, con  bajo coste y del tamaño de una tarjeta de crédito, la cual fue desarrollada en el Reino Unido por la Raspberry Pi Foundation, con el objetivo de promover la enseñanza de informática básica en las escuelas. Sin embargo, debido a su gran versatilidad y potencia de cómputo, se ha vuelto increíblemente popular en una variedad de aplicaciones, desde servidores web caseros hasta prototipos de productos electrónicos. En la Figura 3.3 se puede apreciar como es físicamente una Raspberry Pi.
\imagen{raspberry_pi}{fotografía de una Raspberry Pi extraída de internet}{.4}
La Raspberry Pi ofrece varias ventajas frente a computadores y microcontroladores convencionales, al hacer una fusión de lo mejor de ambos mundos en una única placa. Algunas de las características que hacen destacar a esta placa son las siguientes:
\begin{itemize}
    \item \textbf{Interfaz de Entrada/Salida General (GPIO):} uno de los aspectos más atractivos es su conjunto de pines de Entrada/Salida General (GPIO). Estos pines permiten la interacción con una amplia variedad de componentes electrónicos, como sensores y actuadores. Los pines GPIO de la Raspberry Pi son muy flexibles y pueden configurarse para leer o escribir datos digitales, utilizar buses de comunicación y en algunos modelos para leer y generar señales analógicas, lo que la convierte en una plataforma ideal para proyectos de automatización caseros.
    \item \textbf{Rendimiento y Almacenamiento:} a pesar de su pequeño tamaño, es una computadora completamente funcional, la cual cuenta con procesadores de varios núcleos, permitiendo realizar tareas paralelas, y una tarjeta gráfica que permite desplegar un entorno gráfico y utilizarla como si de un ordenador convencional se tratase. Puede ejecutar varios sistemas operativos de carácter general como Windows y Linux, aunque dispone de su propia distribución Linux optimizada para su hardware, conocida como Raspbian. Esta es la distribución de sistema operativo que se ha elegido para Green In House. Además, dispone de un slot de tarjeta SD, el cuál funciona como un disco duro, lo que permite tener un almacenamiento de datos local de gran tamaño, lo cuál permite a Green In House no tener porblema de espacio de almacenamiento de su base de datos.
    \item \textbf{Red y servidor:} puede conectarse a las red a través de Ethernet o Wi-Fi (en los modelos que cuentan con esta característica). Esto permite a Green In House proporcionar y recoger datos a través de una API REST. El modelo utilizado para el proyecto no dispone de conexión WiFi, por lo que ha sido necesario instalar un adaptador WiFi y sus correspondientes controladores.
    \item \textbf{Costo y comunidad:} este microcomputador es una opción atractiva debido a su bajo costo (aunque actualmente debido a los problemas en la obtención de semiconductores y la inflación, su precio se ha visto muy incrementado respecto a cuando salieron al mercado). A pesar de su potencia y flexibilidad, es significativamente más barata que la mayoría de las computadoras o microcontroladores especializados. Además, cuenta con una comunidad de usuarios activa y entusiasta que puede ser una excelente fuente de ayuda y recursos, al ser de carácter Open Source.
\end{itemize}

    \subsection{Raspbian: Sistema operativo de Raspberry Pi}
    Como se ha comentado anteriormente, existen diferentes versiones de sistema operativo soportados por la Raspberry Pi, o más bien dicho, modificados para poder funcionar en ella \cite{download:raspbian}. Para la realización de Green In House se ha optado por el uso de su distribución oficial Raspbian, en su versión 6.27, ya que está completamente diseñada para sacar el máximo partido a las características de la Raspberry Pi. Aunque existan otros sistemas operativos optimizados que prometan dar mayor rendimiento, he decidido utilizar Raspbian en su versión estable, para evitar posibles problemas derivados de inconsistencias internas del sistema operativo. En la Figura 3.4 se puede ver como es el escritorio de Raspbian.
    \imagen{escritorio_raspbian}{captura de pantalla del escritorio de Raspbian de mi Raspberry}{.6}

\section{Bash: Lenguaje de Programación Shell Linux}
Bash \cite{wiki:bash} es un intérprete de comandos de Unix y es el acrónimo de Bourne Again SHell. Se trata de una evolución del shell Bourne, que fue uno de los primeros intérpretes de comandos del sistema operativo Unix. Bash fue creado por Brian Fox y lanzado por primera vez en 1989. 

Bash es el shell por defecto en la mayoría de las distribuciones de Linux actuales y también se puede utilizar en otros sistemas operativos, como Windows y Mac, a través de software como CMD y Terminal. Bash se utiliza tanto para ejecutar comandos directamente en la terminal, como para crear scripts de shell, los cuales son programas que ejecutan una serie de comandos.

\begin{itemize}
    \item \textbf{Comandos:} Bash es un intérprete de comando, lo que significa que los usuarios pueden escribir comandos, los cuales Bash interpreta y ejecuta. Esto permite a los usuarios interactuar directamente con el sistema operativo y realizar tareas como gestionar archivos, iniciar y detener programas, configurar el entorno del sistema, etc
    \item \textbf{Scripts de Shell:} Bash también es un lenguaje de programación, lo que significa que los usuarios pueden escribir programas (denominado scripts) que ejecutan una serie de comandos. Estos scripts son especialmente útiles para automatizar tareas repetitivas. Un script de Bash puede incluir funciones, bucles, condicionales, y otras estructuras de control de flujo comunes de los lenguajes de programación.   
\end{itemize}
\subsection{Utilización de Bash en Green In House}
Green In House cuenta con varios scripts Bash desarrollados para facilitar las tareas de instalación, despliegue, ejecución y parada de la aplicación.

\section{Python: Lenguaje de programación de aplicaciones de carácter general}
Python \cite{wiki:python} es un lenguaje de programación interpretado, de alto nivel y de propósito general. Fue creado por Guido van Rossum y lanzado por primera vez en 1991. Algunas de sus características principales son:
\begin{itemize}
    \item \textbf{Legibilidad y sintaxis clara:} fue diseñado con una gran énfasis en la legibilidad y la simplicidad, lo que facilita el aprendizaje del lenguaje. Las estructuras de control de Python, las funciones, los bucles y las sentencias condicionales, están diseñadas para ser fácilmente comprensibles.  
    \item \textbf{Interpretado:} es un lenguaje interpretado, lo que significa que el código Python se ejecuta línea por línea. Esto facilita la depuración de los programas y la experimentación interactiva en la terminal de Python o en entornos como Jupyter Notebook.   
    \item \textbf{Multiparadigma:} admite varios paradigmas de programación, incluyendo programación orientada a objetos, programación imperativa y programación funcional, lo que le da una gran flexibilidad para resolver problemas de diferentes maneras.  
    \item \textbf{Ecosistema de librerías:} tiene un ecosistema de librerías de terceros extremadamente rico, que lo hacen adecuado para una amplia gama de tareas. Librerías como NumPy y SciPy para la computación científica, Django y Flask para el desarrollo web, y TensorFlow y PyTorch para el aprendizaje profundo, SQLAlchemy para la gestión de base de datos, OpenAPI para el desarrollos de servidores API REST, TKinter para el desarrollo de interfaces gráficas, ADAFruit para el uso de sensores electrónicos... hacen de Python una opción popular en muchos campos de la informática y la ciencia de datos.
\end{itemize}
Tal y como se describe en los puntos anteriores, Python es un lenguaje de programación dinámico y fuertemente tipado, que combina una sintaxis clara, una semántica simple y un ecosistema de librerías de terceros amplio y robusto. Estas características han llevado a Python a ser uno de los lenguajes de programación más populares en el mundo. Además, debido a estas características, es uno de los lenguajes más utilizados para realizar prototipados y desarrollo ágil de proyectos, al permitir a los programadores realizar programas utilizando un número menor de líneas de código de las que se necesitarían escribir en otros lenguajes como C++ o Java. Debido a su extremada versatilidad, es muy apropiado para una amplia gama de tareas, desde el desarrollo de programas simples, pasando por el desarrollo web, hasta el análisis de datos y la inteligencia artificial.

    \subsection{Utilización de Python en Green In House}
    Todo el código funcional de Green In House está desarrollado en Python, apoyándose en el uso de librerías de terceros para la gestión de los diferentes servicios y tecnologías que utiliza e implementa.

\section{Flutter: lenguaje de programación de aplicaciones multiplataforma}
Flutter \cite{wiki:flutter} es un framework de desarrollo de software multiplataforma de código abierto creado por Google. Algunas de sus características más importantes son:
\begin{itemize}
    \item \textbf{Recarga en caliente:} Uno de los aspectos más útiles es su capacidad de recarga en caliente. Esta característica permite a los desarrolladores experimentar, construir interfaces de usuario, agregar características y corregir errores más rápido. Los cambios en el código se reflejan en tiempo real sin necesidad de reiniciar la aplicación. 
    \item \textbf{Material Design y Cupertino:} está estrechamente integrado con el diseño Material de Google y el diseño Cupertino de Apple, permitiendo a los desarrolladores crear interfaces de usuario que siguen las directrices de diseño de cada plataforma.   
    \item \textbf{Rendimiento:} utiliza el lenguaje de programación Dart, que se compila en código nativo, lo que significa que las aplicaciones tienen un rendimiento cercano al nativo en todas las plataformas.    
    \item \textbf{Widgets:} utiliza un sistema de widgets para crear la interfaz de usuario. Los widgets son bloques de construcción modulares que incluyen elementos como botones, textos, barras de desplazamiento, conmutadores, etc.  
    \item \textbf{Soporte multiplataforma:} está diseñado para permitir a los desarrolladores crear aplicaciones de alto rendimiento y alta fidelidad para múltiples sistemas como iOS, Android y web, todo desde un mismo código
    \item \textbf{Integración de código nativo:} permite la integración de código nativo de los distintos sistemas que soporta, en caso de que se necesitase realizar alguna funcionalidad específica o crítica que requiera de desarrollo nativo. 
\end{itemize}
    \subsection{Dart: el lenguaje de programación de Flutter}
    El lenguaje de programación utilizado en Flutter es Dart \cite{wiki:dart} , el cual también ha sido desarrollado por Google. Dart es un lenguaje orientado a objetos que se compila \textit{Just in Time} (JIT) para el desarrollo y \textit{Ahead of Time} (AOT) para la producción. Esto significa que durante el desarrollo, el código se puede compilar y cambiar sobre la marcha (JIT), lo que permite la recarga en caliente. Para la producción, el código se compila antes de tiempo (AOT) en código nativo, lo que resulta en un rendimiento muy eficiente.
    
    Dart es un lenguaje fuertemente tipado, lo que significa que una vez que se ha creado una variable de un tipo, no es posible cambiarlo. Esto tiene sus desventajas, pero a la vez ayuda a evitar errores comunes en tiempo de ejecución, los cuales podrían hacer caer la aplicación. A pesar de su seguridad de tipos, Dart sigue siendo un lenguaje fácil de aprender y usar, especialmente para aquellos que ya están familiarizados con otros lenguajes de programación orientados a objetos, como Java, C++ o Python.
    
    \subsection{Utilización de Flutter en Green In House}
    Flutter ha sido utilizado para desarrollar una aplicación móvil capaz de utilizar los \textit{endpoints} de la API REST integrada en Green In House. Gracias a ello puede recoger los datos de la base de datos alojada en la Raspberry y puede trabajar con ellos y graficarles, para mostrar al usuario información de manera intuitiva.

\section{API REST:}
Una API REST \cite{wiki:api_rest} (Representational State Transfer) es una forma estándar de diseñar servicios web, los cuales permiten la comunicación y transferencia de datos entre diferentes aplicaciones. Se basa en los principios del protocolo HTTP \textit{(Hypertext Transfer Protocol)} y se utiliza ampliamente en el desarrollo de aplicaciones web y móviles.
Una API REST se compone de entidades o conjuntos de datos específicos. Se accede a ellos mediante una URL \textit{(Uniform Resource Locator)} única, esto se conoce como \textit{endpoitn}. Para realizar la petición y envío de los datos se utilizan los métodos estándar de HTML:
\begin{itemize}
    \item \textbf{GET:} utilizado para consultar datos existentes.
    \item \textbf{POST:} utilizado para crear nuevos datos.
    \item \textbf{PUT:} utilizado para actualizar datos existentes.
    \item \textbf{DELETE:} utilizado para borrar datos existentes.
\end{itemize}
En la Figura 3.5 se puede ver un ejemplo del empleo de estos métodos en Green In House. La comunicación con una API REST se realiza a través de peticiones HTTP. El cliente envía una solicitud al servidor y este responde con los datos solicitados. Los datos se suelen enviar en formato JSON , que es un formato ligero y legible para el intercambio de datos, así como independiente del lenguaje de programación.

La principal ventaja de utilizar una API REST es la interoperabilidad entre diferentes sistemas y plataformas. Permite que aplicaciones desarrolladas en diferentes lenguajes de programación y ejecutándose en diferentes plataformas, puedan comunicarse de manera fácil, eficiente y consistente. Además, al seguir los principios del protocolo HTTP, se aprovechan las características y funcionalidades de dicho protocolo, como la caché, la autenticación y la seguridad.
\imagen{api_rest_gih}{captura de pantalla del Swagger de la API REST de Green In House desarrollada con OpenAPI}{1}